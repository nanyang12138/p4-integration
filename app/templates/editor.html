{% extends "layout.html" %}
{% block content %}
<div class="bg-white rounded-xl shadow-sm border border-slate-200 flex flex-col h-[calc(100vh-140px)]">
  
  <!-- Header -->
  <div class="px-6 py-4 border-b border-slate-100 flex items-center justify-between bg-slate-50">
    <div>
      <div class="flex items-center gap-2 text-slate-800">
        <i class="fa-solid fa-pen-to-square text-primary-500"></i>
        <h3 class="font-mono text-sm font-semibold">{{ file }}</h3>
      </div>
      <p class="text-xs text-slate-500 mt-1">Manual Edit & Resolve</p>
    </div>
    <a class="text-slate-500 hover:text-slate-800 text-xs font-medium transition-colors px-3 py-1.5 rounded border border-slate-200 bg-white hover:bg-slate-50" href="/admin/jobs/{{ job.id }}">
      <i class="fa-solid fa-times mr-1"></i> Cancel
    </a>
  </div>

  <form method="post" action="/admin/jobs/{{ job.id }}/edit" class="flex-grow flex flex-col overflow-hidden">
    <input type="hidden" name="file" value="{{ file }}" />
    
    <div class="flex-grow relative">
       <textarea name="content" class="w-full h-full p-4 font-mono text-xs text-slate-700 leading-relaxed resize-none focus:outline-none focus:ring-0 border-none bg-slate-50" spellcheck="false">{{ content }}</textarea>
    </div>

    <div class="p-4 border-t border-slate-100 bg-white flex justify-end items-center gap-3">
      <a class="px-4 py-2 text-sm font-medium text-slate-600 hover:text-slate-800 transition-colors" href="/admin/jobs/{{ job.id }}">Cancel</a>
      <button class="px-6 py-2 bg-primary-600 hover:bg-primary-700 text-white text-sm font-medium rounded-lg shadow-sm transition-colors flex items-center gap-2" type="submit">
        <i class="fa-solid fa-save"></i> Save & Mark Resolved
      </button>
    </div>
  </form>

</div>
{% endblock %}
